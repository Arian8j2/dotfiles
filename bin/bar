#!/bin/bash

black=#1a1b26
red=#f7768e
green=#9ece6a
yellow=#e0af68
blue=#7aa2f7
magenta=#bb9af7
cyan=#7dcfff
white=#a9b1d6

template="^b$blue^^c$black^ CPU %s ^d^  Memory %s  ^b$green^^c$black^ %s ^d^"

cpu() {
	top -bn 1 | head | awk '/^%Cpu/ { print int($2)"%" }'
}

mem() {
	free -h | awk '/^Mem/ { print $3 }' | sed s/i//g
}

datetime() {
    date '+%a, %I:%M %p'
}

while true; do
	string=$(printf "$template" $(cpu) $(mem) "$(datetime)")
	xsetroot -name "$string" && sleep 5
done
